<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Éditeur de Positions des Cartes de Tarot</title>
    <style>
        :root {
            --card-base-width: 100px;
            --card-ratio: 1.7;
            --card-height: calc(var(--card-base-width) * var(--card-ratio));
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f7;
        }

        #app {
            display: flex;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        #workspace {
            flex: 1;
            background: #a0d5b5;
            border-radius: 10px;
            height: 80vh;
            position: relative;
            overflow: hidden;
        }

        #controls {
            width: 300px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .card {
            width: var(--card-base-width);
            height: var(--card-height);
            background: white;
            border: 2px solid #6b5b95;
            border-radius: 5px;
            position: absolute;
            cursor: move;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #333;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .card.selected {
            border-color: #28a745;
            box-shadow: 0 0 0 2px #28a745;
        }

        select, button {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            background: #6b5b95;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background: #534672;
        }

        #output {
            margin-top: 20px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }

        .coordinates {
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div id="workspace"></div>
        <div id="controls">
            <select id="spreadType">
                <option value="cross">Tirage en Croix</option>
                <option value="horseshoe">Fer à Cheval</option>
                <option value="love">Tirage de l'Amour</option>
                <option value="celtic">Croix Celtique</option>
            </select>
            <button id="resetBtn">Réinitialiser</button>
            <button id="copyBtn">Copier les Variables CSS</button>
            <div class="coordinates">
                <div>Position X: <span id="posX">0</span>%</div>
                <div>Position Y: <span id="posY">0</span>%</div>
            </div>
            <div id="output"></div>
        </div>
    </div>

    <script>
        const spreads = {
            cross: {
                name: 'Tirage en Croix',
                cards: [
                    { name: 'center', label: 'Centre' },
                    { name: 'top', label: 'Haut' },
                    { name: 'left', label: 'Gauche' },
                    { name: 'right', label: 'Droite' },
                    { name: 'bottom', label: 'Bas' }
                ]
            },
            horseshoe: {
                name: 'Fer à Cheval',
                cards: [
                    { name: 'past', label: 'Passé' },
                    { name: 'recent', label: 'Récent' },
                    { name: 'present', label: 'Présent' },
                    { name: 'future', label: 'Futur' },
                    { name: 'outcome', label: 'Résultat' },
                    { name: 'influences', label: 'Influences' },
                    { name: 'advice', label: 'Conseil' }
                ]
            },
            love: {
                name: 'Tirage de l\'Amour',
                cards: [
                    { name: 'you', label: 'Vous' },
                    { name: 'partner', label: 'Partenaire' },
                    { name: 'relationship', label: 'Relation' },
                    { name: 'foundation', label: 'Fondation' },
                    { name: 'past', label: 'Passé' },
                    { name: 'present', label: 'Présent' },
                    { name: 'future', label: 'Futur' }
                ]
            },
            celtic: {
                name: 'Croix Celtique',
                cards: [
                    { name: 'present', label: 'Présent' },
                    { name: 'challenge', label: 'Défi' },
                    { name: 'crown', label: 'Couronne' },
                    { name: 'foundation', label: 'Fondation' },
                    { name: 'past', label: 'Passé' },
                    { name: 'future', label: 'Futur' },
                    { name: 'self', label: 'Soi' },
                    { name: 'environment', label: 'Environnement' },
                    { name: 'hopes', label: 'Espoirs' },
                    { name: 'outcome', label: 'Résultat' }
                ]
            }
        };

        let selectedCard = null;
        let cardPositions = {};
        const workspace = document.getElementById('workspace');
        const spreadSelect = document.getElementById('spreadType');
        const output = document.getElementById('output');
        const posX = document.getElementById('posX');
        const posY = document.getElementById('posY');

        function createCard(card, index) {
            const cardEl = document.createElement('div');
            cardEl.className = 'card';
            cardEl.textContent = `${card.label} (${index + 1})`;
            cardEl.dataset.name = card.name;
            
            // Position initiale au centre
            cardEl.style.left = '50%';
            cardEl.style.top = '50%';
            cardEl.style.transform = 'translate(-50%, -50%)';
            
            cardEl.addEventListener('mousedown', startDragging);
            return cardEl;
        }

        function startDragging(e) {
            if (selectedCard) {
                selectedCard.classList.remove('selected');
            }
            selectedCard = e.target;
            selectedCard.classList.add('selected');

            const rect = workspace.getBoundingClientRect();
            const cardRect = selectedCard.getBoundingClientRect();

            function onMouseMove(e) {
                const x = ((e.clientX - rect.left) / rect.width) * 100;
                const y = ((e.clientY - rect.top) / rect.height) * 100;
                
                selectedCard.style.left = x + '%';
                selectedCard.style.top = y + '%';
                selectedCard.style.transform = 'translate(-50%, -50%)';

                // Update coordinates display
                posX.textContent = Math.round(x);
                posY.textContent = Math.round(y);

                // Save position
                const name = selectedCard.dataset.name;
                const spreadType = spreadSelect.value;
                if (!cardPositions[spreadType]) {
                    cardPositions[spreadType] = {};
                }
                cardPositions[spreadType][name] = { x, y };
                updateOutput();
            }

            function onMouseUp() {
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
            }

            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
        }

        function updateOutput() {
            const spreadType = spreadSelect.value;
            const positions = cardPositions[spreadType];
            if (!positions) return;

            let css = `/* Positions pour ${spreads[spreadType].name} */\n`;
            Object.entries(positions).forEach(([name, pos]) => {
                css += `--${spreadType}-${name}-x: ${Math.round(pos.x)}%;\n`;
                css += `--${spreadType}-${name}-y: ${Math.round(pos.y)}%;\n`;
            });
            output.textContent = css;
        }

        function loadSpread() {
            workspace.innerHTML = '';
            const spreadType = spreadSelect.value;
            const spread = spreads[spreadType];
            
            spread.cards.forEach((card, index) => {
                const cardEl = createCard(card, index);
                workspace.appendChild(cardEl);
                
                // Restore saved position if exists
                if (cardPositions[spreadType]?.[card.name]) {
                    const pos = cardPositions[spreadType][card.name];
                    cardEl.style.left = pos.x + '%';
                    cardEl.style.top = pos.y + '%';
                }
            });
            
            updateOutput();
        }

        spreadSelect.addEventListener('change', loadSpread);
        document.getElementById('resetBtn').addEventListener('click', () => {
            cardPositions[spreadSelect.value] = {};
            loadSpread();
        });

        document.getElementById('copyBtn').addEventListener('click', () => {
            navigator.clipboard.writeText(output.textContent);
            alert('Variables CSS copiées dans le presse-papier !');
        });

        // Initial load
        loadSpread();
    </script>
</body>
</html> 